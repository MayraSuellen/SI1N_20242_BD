CREATE SCHEMA CS2_SI1N ;
USE CS2_SI1N;

CREATE TABLE IF NOT EXISTS PASSAGEIROS(
CPF_PASSAGEIRO INT PRIMARY KEY,
NOME_PASSAGEIRO VARCHAR(100) NOT NULL,
RUA_PASSAGEIRO VARCHAR(100) NOT NULL,
NUM_RUA_PASSAGEIRO VARCHAR(30) NOT NULL,
BAIRRO_PASSAGEIRO VARCHAR(100) NOT NULL,
CIDADE_PASSAGEIRO VARCHAR(100) NOT NULL,
UF_PASSAGEIRO VARCHAR(10) NOT NULL,
PAIS_PASSAGEIRO VARCHAR(100) NOT NULL,
EMAIL_PASSAGEIRO VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS AEROPORTOS(
COD_AEROPORTO INT PRIMARY KEY,
NOME_AEROPORTO VARCHAR(100) NOT NULL,
CIDADE_AEROPORTO VARCHAR(100) NOT NULL,
UF_AEROPORTO VARCHAR(10) NOT NULL,
PAIS_AEROPORTO VARCHAR(100) NOT NULL,
LATITUDE_AEROPORTO VARCHAR(50) NOT NULL,
LONGITUDE_AEROPORTO VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS AERONAVES(
PFX_AERO VARCHAR(20) PRIMARY KEY,
MODELO_AERO VARCHAR(50) NOT NULL,
ANO_FABR_AERO YEAR NOT NULL,
CAPACIDADE_AERO INT NOT NULL,
FABRICANTE_AERO VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS FUNCIONARIOS(
ID_FUNC INT PRIMARY KEY,
FUNCAO_FUNC VARCHAR(50) NOT NULL,
NOME_FUNC VARCHAR(100) NOT NULL,
DATANASC_FUNC DATE NOT NULL,
TELEFONE_FUNC VARCHAR(15) NOT NULL
);

CREATE TABLE IF NOT EXISTS RESERVAS(
CPF_PASSAGEIRO INT PRIMARY KEY,
VOO_COD INT PRIMARY KEY,
PRIMARY KEY(CPF_PASSAGEIRO, VOO_COD),
CONSTRAINT FK_CPF_PASS FOREIGN KEY(CPF_PASSAGEIRO) REFERENCES PASSAGEIROS(CPF_PASSAGEIRO),
CONSTRAINT FK_VOO_COD FOREIGN KEY(VOO_COD) REFERENCES VOOS (VOO_COD)
);

CREATE TABLE IF NOT EXISTS EQUIPES(
ID_FUNC INT PRIMARY KEY,
VOO_COD INT PRIMARY KEY,
PRIMARY KEY(ID_FUNC, VOO_COD),
CONSTRAINT FK_ID_FUNC FOREIGN KEY(ID_FUNC) REFERENCES FUNCIONARIOS(ID_FUNC),
CONSTRAINT FK_VOO_COD FOREIGN KEY(VOO_COD) REFERENCES VOOS (VOO_COD)
);

CREATE TABLE IF NOT EXISTS VOOS(
VOO_COD INT PRIMARY KEY,
DATA_HORA_ORIGEM DATE NOT NULL,
DATA_HORA_DESTINO DATE NOT NULL,
AERO_ORIGEM INT NOT NULL,
AERO_DESTINO INT NOT NULL,
AERONAVE VARCHAR(20) NOT NULL,
ID_EQUIPES INT NOT NULL,
CONSTRAINT AEROP_VOO1 FOREIGN KEY(AERO_ORIGEM) REFERENCES AEROPORTOS(COD_AEROPORTO),
CONSTRAINT AEROP_VOO2 FOREIGN KEY(AERO_DESTINO) REFERENCES AEROPORTOS(COD_AEROPORTO),  
CONSTRAINT AERON_VOO FOREIGN KEY(AERONAVE) REFERENCES AERONAVES(PFX_AERO),
CONSTRAINT EQUIPES FOREIGN KEY(ID_EQUIPES) REFERENCES EQUIPES(ID_FUNC,VOO_COD)
);


  
