-- Criar tabela Alunos
CREATE TABLE Alunos (
    ID_Aluno INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(100) NOT NULL,
    CPF VARCHAR(11) NOT NULL UNIQUE,
    Data_Nascimento DATE NOT NULL,
    Endereco VARCHAR(255)
);

-- Criar tabela Instrutores
CREATE TABLE Instrutores (
    ID_Instrutor INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(100) NOT NULL,
    Especialidade VARCHAR(255)
);

-- Criar tabela Modalidades
CREATE TABLE Modalidades (
    ID_Modalidade INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(100) NOT NULL,
    Descricao TEXT
);

-- Criar tabela Planos de Treinamento
CREATE TABLE Planos_Treinamento (
    ID_Plano INT AUTO_INCREMENT PRIMARY KEY,
    ID_Aluno INT,
    ID_Instrutor INT,
    Descricao TEXT,
    Data_Criacao DATE NOT NULL,
    Data_Atualizacao DATE,
    FOREIGN KEY (ID_Aluno) REFERENCES Alunos(ID_Aluno),
    FOREIGN KEY (ID_Instrutor) REFERENCES Instrutores(ID_Instrutor)
);

-- Criar tabela Aulas
CREATE TABLE Aulas (
    ID_Aula INT AUTO_INCREMENT PRIMARY KEY,
    ID_Modalidade INT,
    ID_Instrutor INT,
    Horario TIME NOT NULL,
    Capacidade INT NOT NULL,
    Lotacao_Atual INT DEFAULT 0,
    FOREIGN KEY (ID_Modalidade) REFERENCES Modalidades(ID_Modalidade),
    FOREIGN KEY (ID_Instrutor) REFERENCES Instrutores(ID_Instrutor)
);

-- Criar tabela Pagamentos
CREATE TABLE Pagamentos (
    ID_Pagamento INT AUTO_INCREMENT PRIMARY KEY,
    ID_Aluno INT,
    Data_Pagamento DATE NOT NULL,
    Valor DECIMAL(10, 2) NOT NULL,
    Status ENUM('pago', 'pendente') NOT NULL,
    FOREIGN KEY (ID_Aluno) REFERENCES Alunos(ID_Aluno)
);

-- Criar tabela associativa Matriculas
CREATE TABLE Matriculas (
    ID_Aluno INT,
    ID_Modalidade INT,
    PRIMARY KEY (ID_Aluno, ID_Modalidade),
    FOREIGN KEY (ID_Aluno) REFERENCES Alunos(ID_Aluno),
    FOREIGN KEY (ID_Modalidade) REFERENCES Modalidades(ID_Modalidade)
);
